{"version":3,"sources":["../../src/routes/route.page.js"],"names":["express","require","marked","router","Router","PostModel","auth","get","req","res","next","render","title","send","adminRequired","id","params","findOne","_id","err","post","content","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb,C,CAAgC;AAChC,IAAIE,SAASH,QAAQI,MAAR,EAAb;AACA,IAAIC,YAAYJ,QAAQ,gBAAR,CAAhB;AACA,IAAIK,OAAOL,QAAQ,qBAAR,CAAX;AACA;AACAE,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxCD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO;AADW,GAApB;AAGD,CAJD;AAKA;AACAT,OAAOI,GAAP,CAAW,QAAX,EAAqB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACvCD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO;AADW,GAApB;AAGD,CAJD;AAKA;AACAT,OAAOI,GAAP,CAAW,OAAX,EAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC5CD,MAAII,IAAJ,CAAS,yBAAT;AACD,CAFD;;AAIA;AACAV,OAAOI,GAAP,CAAW,eAAX,EAA2BD,KAAKQ,aAAhC,EAA+C,UAACN,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjED,MAAIE,MAAJ,CAAW,QAAX,EAAoB,EAACC,OAAM,MAAP,EAApB;AACD,CAFD;AAGA;;AAEAT,OAAOI,GAAP,CAAW,iBAAX,EAA6B,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAgB;AAC5C;AACC,MAAIK,KAAKP,IAAIQ,MAAJ,CAAWD,EAApB;;AAEAV,YAAUY,OAAV,CAAkB,EAACC,KAAIH,EAAL,EAAlB,EAA2B,UAACI,GAAD,EAAKC,IAAL,EAAY;AACrC;AACAA,SAAKC,OAAL,GAAenB,OAAOkB,KAAKC,OAAZ,CAAf;AACAZ,QAAIE,MAAJ,CAAW,MAAX,EAAkB,EAACC,OAAM,UAAQQ,KAAKR,KAApB,EAA0BQ,UAA1B,EAAlB;AACD,GAJD;AAKD,CATD;AAUA;;AAEAjB,OAAOI,GAAP,CAAW,iBAAX,EAA6B,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAgB;AAC5C;AACC,MAAIK,KAAKP,IAAIQ,MAAJ,CAAWD,EAApB;;AAEEN,MAAIE,MAAJ,CAAW,MAAX,EAAkB,EAACC,OAAM,MAAP,EAAcG,IAAGA,EAAjB,EAAlB;AACH,CALD;;AAOA;;AAEAZ,OAAOI,GAAP,CAAW,SAAX,EAAqB,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAgB;AACnCD,MAAIE,MAAJ,CAAW,QAAX;AACD,CAFD;AAGA;AACAR,OAAOI,GAAP,CAAW,SAAX,EAAqB,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAgB;AACnCD,MAAIE,MAAJ,CAAW,QAAX;AACD,CAFD;;AAKAW,OAAOC,OAAP,GAAiBpB,MAAjB","file":"route.page.js","sourcesContent":["var express = require('express');\r\nvar marked = require('marked'); //引入marked\r\nvar router = express.Router();\r\nvar PostModel = require(\"../models/post\");\r\nvar auth = require('../middlewares/auth');\r\n/* GET home page. */\r\nrouter.get('/', function (req, res, next) {\r\n  res.render('index', {\r\n    title: 'Express'\r\n  });\r\n});\r\n// Get Posts page\r\nrouter.get('/posts', (req, res, next) => {\r\n  res.render(\"posts\", {\r\n    title: \"你好!!\"\r\n  });\r\n});\r\n/* GET users listing. */\r\nrouter.get('/user', function (req, res, next) {\r\n  res.send('respond with a resource');\r\n});\r\n\r\n/*GET posts create page */\r\nrouter.get('/posts/create',auth.adminRequired, (req, res, next) => {\r\n  res.render(\"create\",{title:\"填写表单\"});\r\n}); \r\n/* GET posts show article page */\r\n\r\nrouter.get('/posts/show/:id',(req,res,next)=>{\r\n /*  var id = req.query.id; */\r\n  var id = req.params.id;\r\n\r\n  PostModel.findOne({_id:id},(err,post)=>{\r\n    // push the content and convert to markdown syntax \r\n    post.content = marked(post.content);\r\n    res.render('show',{title:\"文章详情 \"+post.title,post});\r\n  });\r\n});\r\n/* processing send the edit article request of client browser then response an HTML skeleton   */\r\n\r\nrouter.get(\"/posts/edit/:id\",(req,res,next)=>{\r\n /*  var id = req.query.id; */ \r\n  var id = req.params.id;\r\n\r\n    res.render('edit',{title:\"编辑文章\",id:id});\r\n});\r\n\r\n/* GET signup page.\r\n added the  route method for sigup  */\r\nrouter.get(\"/signup\",(req,res,next)=>{\r\n  res.render('signup');\r\n});\r\n/* GET signin page */\r\nrouter.get(\"/signin\",(req,res,next)=>{\r\n  res.render('signin');\r\n});\r\n\r\n\r\nmodule.exports = router;"]}